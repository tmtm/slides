<section>

<h1>MySQL 8</h1>

<p>MySQL Innovation Day Tokyo</p>

<p>2018/05/23</p>

<p>ã¨ã¿ãŸã¾ã•ã²ã‚</p>

</section>
<section>

<h2>è‡ªå·±ç´¹ä»‹</h2>

<p><img src="images/icon2.jpg" alt="" style="float:right;width:200px;border:0px"></p>

<ul>
  <li>ã¨ã¿ãŸã¾ã•ã²ã‚
    <ul>
      <li><a href="http://tmtms.hatenablog.com">http://tmtms.hatenablog.com</a></li>
      <li><a href="http://twitter.com/tmtms">http://twitter.com/tmtms</a></li>
    </ul>
  </li>
  <li>æ—¥æœ¬MySQLãƒ¦ãƒ¼ã‚¶ä¼š</li>
  <li>è¶£å‘³
    <ul>
      <li>æ–‡å­—åŒ–ã‘</li>
      <li>MySQLãƒ—ãƒ­ãƒˆã‚³ãƒ«</li>
    </ul>
  </li>
</ul>

</section>
<section>

<h1>MySQL 8 ğŸ‰ğŸ‰ğŸ‰</h1>

</section>
<section>

<p>MySQL 8</p>

<p>å¤šãã®æ–°æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ãŒâ€¦</p>

</section>
<section>

<h3>MySQLæ’ä¾‹ã€ŒRCã¨ã¯ã„ã£ãŸã„â€¦ã€æ¡ˆä»¶</h3>

</section>
<section>

<h3>utf8ã®æŒ‡å®šã§warning</h3>

<pre><code class="language-text">mysql&gt; set names utf8;
Query OK, 0 rows affected, 1 warning (0.00 sec)

Warning (Code 3719): 'utf8' is currently an alias for the characte
r set UTF8MB3, which will be replaced by UTF8MB4 in a future relea
se. Please consider using UTF8MB4 in order to be unambiguous.
</code></pre>

</section>
<section>

<h3>mysqlshã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæ´¾æ‰‹ã«</h3>

<p><img src="images/mysqlsh.png" alt="" style="width:70%"></p>

</section>
<section>

<h2>MySQL Parameters</h2>

<p><a href="https://tmtm.github.io/mysql-params" target="_blank">https://tmtm.github.io/mysql-params</a></p>

<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³é–“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å€¤ã‚’æ¯”è¼ƒ</p>

<p><a href="https://tmtm.github.io/mysql-params/?vers=5.7.22,8.0.11&amp;diff=true" target="_blank">5.7 ã¨ 8.0 ã®æ¯”è¼ƒ</a></p>

</section>
<section>

<h2>æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¾ã‚ã‚Š</h2>

</section>
<section>

<h3>ujis,sjis,eucjpms,cp932 ã¯ã‚‚ã†è¦ã‚‰ãªã„ (å€‹äººã®æ„Ÿæƒ³ã§ã™)</h3>

</section>
<section>

<h3>Default Charset</h3>

<table>
  <tbody>
    <tr>
      <td>5.7</td>
      <td>latin1</td>
      <td>ISO8859-1 (æ¬§ç±³ã®æ–‡å­—)</td>
    </tr>
    <tr>
      <td>8.0</td>
      <td>utf8mb4</td>
      <td>Unicode (ä¸–ç•Œä¸­ã®æ–‡å­—)</td>
    </tr>
  </tbody>
</table>

<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§æ—¥æœ¬èªã‚„çµµæ–‡å­—ãŒä½¿ãˆã‚‹</p>

</section>
<section>

<h3>utf8mb4 Collations</h3>

<p>æ–‡å­—ã®ç…§åˆè¦å‰‡<br>
æ—¥æœ¬èªç’°å¢ƒã§ä½¿ã‚ã‚Œãã†ãªã‚‚ã®</p>

<ul>
  <li>utf8mb4_bin</li>
  <li>utf8mb4_general_ci (5.7 ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</li>
  <li>utf8mb4_unicode_ci</li>
  <li>utf8mb4_unicode_520_ci</li>
  <li>
<strong>utf8mb4_0900_ai_ci</strong> (8.0 ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</li>
  <li><strong>utf8mb4_0900_as_ci</strong></li>
  <li><strong>utf8mb4_0900_as_cs</strong></li>
  <li><strong>utf8mb4_ja_0900_as_cs</strong></li>
  <li><strong>utf8mb4_ja_0900_as_cs_ks</strong></li>
</ul>

</section>
<section>

<h3>Collation name</h3>

<table>
  <tbody>
    <tr>
      <td>bin</td>
      <td>ã‚³ãƒ¼ãƒ‰ã®ã¾ã¾</td>
    </tr>
    <tr>
      <td>general</td>
      <td>MySQLç‹¬è‡ªè¦å‰‡</td>
    </tr>
    <tr>
      <td>unicode</td>
      <td>Unicode 4.0.0</td>
    </tr>
    <tr>
      <td>unicode_0520</td>
      <td>Unicode 5.2.0</td>
    </tr>
    <tr>
      <td><strong>0900</strong></td>
      <td>Unicode 9.0.0</td>
    </tr>
    <tr>
      <td><strong>ja_0900</strong></td>
      <td>Unicode 9.0.0 + <strong>æ—¥æœ¬èª</strong>
</td>
    </tr>
  </tbody>
</table>

</section>
<section>

<h3>Collation name</h3>

<table>
  <tbody>
    <tr>
      <td>ai</td>
      <td>Accent Insensitive</td>
    </tr>
    <tr>
      <td>as</td>
      <td>Accent Sensitive</td>
    </tr>
    <tr>
      <td>ci</td>
      <td>Case Insensitive</td>
    </tr>
    <tr>
      <td>cs</td>
      <td>Case Sensitive</td>
    </tr>
    <tr>
      <td>ks</td>
      <td>Kana Sensitive</td>
    </tr>
  </tbody>
</table>

</section>
<section>

<h3>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆCollationã®é•ã„</h3>

<ul>
  <li>5.7: utf8mb4_general_ci
    <ul>
      <li>
<code>A</code>ï¼<code>a</code>, <code>ï¼¡</code>ï¼<code>ï½</code>, <code>ã‚„</code>â‰ <code>ã‚ƒ</code>
</li>
      <li>
<code>ã¯</code>â‰ <code>ã±</code>â‰ <code>ã°</code>
</li>
      <li>
<code>ã‚</code>â‰ <code>ã‚¢</code>
</li>
      <li>
<code>ğŸ£</code>ï¼<code>ğŸº</code>
</li>
    </ul>
  </li>
  <li>8.0: utf8mb4_0900_ai_ci
    <ul>
      <li>
<code>A</code>ï¼<code>a</code>, <code>ï¼¡</code>ï¼<code>ï½</code>, <strong><code>ã‚„</code>ï¼<code>ã‚ƒ</code></strong>
</li>
      <li><strong><code>ã¯</code>ï¼<code>ã±</code>ï¼<code>ã°</code></strong></li>
      <li><strong><code>ã‚</code>ï¼<code>ã‚¢</code></strong></li>
      <li><strong><code>ğŸ£</code>â‰ <code>ğŸº</code></strong></li>
    </ul>
  </li>
</ul>

</section>
<section>

<h3>Charset=utf8mb4 ã‚’æŒ‡å®šã—ãŸã ã‘ã§ã¯ 5.7 ã¨ 8.0 ã§å‹•ããŒç•°ãªã‚‹ã®ã§æ³¨æ„</h3>

</section>
<section>

<h3>æ–°ã—ã„CollationãŸã¡</h3>

</section>
<section>

<h3>utf8mb4_0900_ai_ci</h3>

<ul>
  <li>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®é•ã„ã‚’åŒºåˆ¥ã—ãªã„
    <ul>
      <li>
<code>ã¯ã¯</code> ï¼ <code>ã±ã±</code> ï¼ <code>ã°ã°</code>
</li>
    </ul>
  </li>
  <li>å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„
    <ul>
      <li>
<code>ã³ã‚‡ã†ã„ã‚“</code> ï¼ <code>ã³ã‚ˆã†ã„ã‚“</code>
</li>
      <li>
<code>ã„ã‚ã¯</code> ï¼ <code>ã‚¤ãƒ­ãƒ</code>
</li>
      <li>
<code>æ ªå¼ä¼šç¤¾</code> ï¼ <code>ã¿</code>
</li>
    </ul>
  </li>
</ul>

</section>
<section>

<h3>utf8mb4_0900_<strong>as</strong>_ci</h3>

<ul>
  <li>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®é•ã„ã‚’<strong>åŒºåˆ¥ã™ã‚‹</strong>
    <ul>
      <li>
<code>ã¯ã¯</code> â‰  <code>ã±ã±</code> â‰  <code>ã°ã°</code>
</li>
    </ul>
  </li>
  <li>å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„
    <ul>
      <li>
<code>ã³ã‚‡ã†ã„ã‚“</code> ï¼ <code>ã³ã‚ˆã†ã„ã‚“</code>
</li>
      <li>
<code>ã„ã‚ã¯</code> ï¼ <code>ã‚¤ãƒ­ãƒ</code>
</li>
      <li>
<code>æ ªå¼ä¼šç¤¾</code> ï¼ <code>ã¿</code>
</li>
    </ul>
  </li>
</ul>

</section>
<section>

<h3>utf8mb4_0900_as_<strong>cs</strong>
</h3>

<ul>
  <li>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®é•ã„ã‚’åŒºåˆ¥ã™ã‚‹
    <ul>
      <li>
<code>ã¯ã¯</code> â‰  <code>ã±ã±</code> â‰  <code>ã°ã°</code>
</li>
    </ul>
  </li>
  <li>å¤§æ–‡å­—å°æ–‡å­—ã‚’<strong>åŒºåˆ¥ã™ã‚‹</strong>
    <ul>
      <li>
<code>ã³ã‚‡ã†ã„ã‚“</code> â‰  <code>ã³ã‚ˆã†ã„ã‚“</code>
</li>
      <li>
<code>ã„ã‚ã¯</code> â‰  <code>ã‚¤ãƒ­ãƒ</code>
</li>
      <li>
<code>æ ªå¼ä¼šç¤¾</code> â‰  <code>ã¿</code>
</li>
    </ul>
  </li>
</ul>

<p>utf8mb4_bin ã¨åŒã˜?? (é•ã„ã¾ã™)</p>

</section>
<section>

<h3>utf8mb4_<strong>ja</strong>_0900_as_cs</h3>

<ul>
  <li>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®é•ã„ã‚’åŒºåˆ¥ã™ã‚‹
    <ul>
      <li>
<code>ã¯ã¯</code> â‰  <code>ã±ã±</code> â‰  <code>ã°ã°</code>
</li>
    </ul>
  </li>
  <li>å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹
    <ul>
      <li>
<code>ã³ã‚‡ã†ã„ã‚“</code> â‰  <code>ã³ã‚ˆã†ã„ã‚“</code>
</li>
      <li>
<code>æ ªå¼ä¼šç¤¾</code> â‰  <code>ã¿</code>
</li>
    </ul>
  </li>
  <li>ã‚«ã‚¿ã‚«ãƒŠã²ã‚‰ãŒãªã‚’<strong>åŒºåˆ¥ã—ãªã„</strong>
    <ul>
      <li>
<code>ã„ã‚ã¯</code> ï¼ <code>ã‚¤ãƒ­ãƒ</code>
</li>
    </ul>
  </li>
</ul>

</section>
<section>

<h3>utf8mb4_ja_0900_as_cs_<strong>ks</strong>
</h3>

<ul>
  <li>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®é•ã„ã‚’åŒºåˆ¥ã™ã‚‹
    <ul>
      <li>
<code>ã¯ã¯</code> â‰  <code>ã±ã±</code> â‰  <code>ã°ã°</code>
</li>
    </ul>
  </li>
  <li>å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹
    <ul>
      <li>
<code>ã³ã‚‡ã†ã„ã‚“</code> â‰  <code>ã³ã‚ˆã†ã„ã‚“</code>
</li>
      <li>
<code>æ ªå¼ä¼šç¤¾</code> â‰  <code>ã¿</code>
</li>
    </ul>
  </li>
  <li>ã‚«ã‚¿ã‚«ãƒŠã²ã‚‰ãŒãªã‚’<strong>åŒºåˆ¥ã™ã‚‹</strong>
    <ul>
      <li>
<code>ã„ã‚ã¯</code> â‰  <code>ã‚¤ãƒ­ãƒ</code>
</li>
    </ul>
  </li>
</ul>

<p>utf8mb4_0900_as_cs ã¨åŒã˜??</p>

</section>
<section>

<h3>utf8mb4_0900 ã¨ utf8mb4_<strong>ja</strong>_0900 ã®é•ã„</h3>

</section>
<section>

<h3>ã‚½ãƒ¼ãƒˆé †</h3>

<pre><code class="language-text">mysql&gt; select hex(s),s from ja order by s;
+--------+------+
| hex(s) | s    |
+--------+------+
| E4BA9C | äºœ   |
| E4BC8A | ä¼Š   |
| E99BA8 | é›¨   |
| E6A084 | æ „   |
| E5A5A5 | å¥¥   |
+--------+------+
</code></pre>

</section>
<section>

<h3>é•·éŸ³</h3>

<pre style="font-size: 60%"><code class="language-text">mysql&gt; select s from ja order by s;
+--------+
| s      |
+--------+
| ã‚ãƒ¼   |
| ã‚ã‚   |
| ã‚ã„   |
| ã„ã‚   |
| ã„ãƒ¼   |
| ã„ã„   |
| ã†ã‚   |
| ã†ã„   |
| ã†ãƒ¼   |
+--------+
</code></pre>

</section>
<section>

<h3>ja_0900 ã¯ JISé †</h3>

<h3>æ—¥æœ¬èªè¾æ›¸é †</h3>

</section>
<section>

<h3>utf8mb4_0900_as_csãŒä¸€ç•ªç„¡é›£ï¼Ÿ</h3>

<h3>utf8mb4_binã§ã‚‚ã„ã„ã‹ã‚‚</h3>

</section>
<section>

<h2>ã¾ã¨ã‚</h2>

<ul>
  <li>Charsetã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒutf8mb4ã§ä¾¿åˆ©ï¼</li>
  <li>æ—¥æœ¬èªCollationãŒå¢—ãˆãŸï¼</li>
  <li>é©åˆ‡ãªCollationã‚’ä½¿ãŠã†ï¼</li>
</ul>

</section>
