<!doctype html>
<html lang="en">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="utf-8">

<title>MySQLã¨ä»¤å’Œ</title>

<meta name="description" content="">
<meta name="author" content="">
<meta name="generator" content="reveal-ck 3.9.1">



<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

<link rel="stylesheet" href="css/reveal.css">
<link rel="stylesheet" href="css/theme/tmtms.css" id="theme">

<!-- Code syntax highlighting -->
<link rel="stylesheet" href="lib/css/zenburn.css">

<link rel="stylesheet" href="css/reveal-ck.css">

<link rel="stylesheet" href="css/rabbit.css">
<link rel="stylesheet" href="css/theme/tmtms.css">

<!-- Printing and PDF exports -->
<script>
  var link = document.createElement( 'link' );
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
  document.getElementsByTagName( 'head' )[0].appendChild( link );
</script>

<!--[if lt IE 9]>
<script src="lib/js/html5shiv.js"></script>
<![endif]-->

  </head>

  <body>
    <div class="reveal">
  <!-- Any section element inside of this container is displayed as a slide -->
  <div class="slides">
    <section>

<h1>MySQLã¨ä»¤å’Œ</h1>

<p>ã¨ã¿ãŸã¾ã•ã²ã‚</p>

<p>2019-05-17</p>

<p>Oracle Code Tokyo 2019</p>

</section>
<section>

<h2>è‡ªå·±ç´¹ä»‹</h2>

<p><img src="images/icon2.jpg" alt="" style="position:absolute;top:25%;right:0;width:180px;border:0px"></p>

<ul>
  <li>ã¨ã¿ãŸã¾ã•ã²ã‚</li>
  <li><a href="https://twitter.com/tmtms">@tmtms</a></li>
  <li>æ—¥æœ¬MySQLãƒ¦ãƒ¼ã‚¶ä¼š</li>
  <li>å¯Œå£«é€šã‚¯ãƒ©ã‚¦ãƒ‰ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚º</li>
  <li>Oracle ACE Associate</li>
  <li><a href="https://tmtm.github.io/mysql-params/?vers=8.0.11,8.0.16&amp;diff=true">http://tmtm.github.io/mysql-params/</a></li>
  <li>å¾—æ„æŠ€: Ruby, æ–‡å­—åŒ–ã‘</li>
</ul>

</section>
<section>

<h1>ãŠ—ä»¤å’Œå…ƒå¹´ğŸ‰</h1>

</section>
<section>

<h2>ä»Šæ—¥ã¯ã€Œä»¤å’Œã€ã®è©±ã‚’ã—ã¾ã™</h2>

</section>
<section>

<h2>ãã®1</h2>

<h2>ã€Œä»¤å’Œã€ã¨è¨€ãˆã°â€¦</h2>

</section>
<section>

<h2>ä¼¼ã¦ã‚‹ã‘ã©é•ã†æ–‡å­—</h2>

<h2>ã€Œä»¤ã€ã¨ã€Œï¦¨ã€</h2>

</section>
<section>

<h3>åŒã˜ã«è¦‹ãˆã‚‹ã‘ã©åˆ¥ã®æ–‡å­—</h3>

<ul>
  <li>ã€Œä»¤ã€ U+4EE4 CJK UNIFIED IDEOGRAPH</li>
  <li>ã€Œï¦¨ã€ U+F9A8 CJK COMPATIBILITY IDEOGRAPH</li>
</ul>

<p>å›°ã‚‹ï¼</p>

</section>
<section>

<h3>MySQLã§</h3>

<pre style="font-size: 60%"><code class="language-sql">mysql&gt; set @a='ä»¤å’Œ', @b='ï¦¨å’Œ';
mysql&gt; select @a, @b, hex(@a), hex(@b);
+--------+--------+--------------+--------------+
| @a     | @b     | hex(@a)      | hex(@b)      |
+--------+--------+--------------+--------------+
| ä»¤å’Œ   | ï¦¨å’Œ   | E4BBA4E5928C | EFA6A8E5928C |
+--------+--------+--------------+--------------+
mysql&gt; select @a=@b;
+-------+
| @a=@b |
+-------+
|     1 | â† ä¸€è‡´
+-------+
</code></pre>

</section>
<section>

<h1>ğŸ˜Š</h1>

</section>
<section>

<h2>ãã®2</h2>
<h2>ã€Œä»¤å’Œã€ã¨è¨€ãˆã°â€¦</h2>

</section>
<section>

<h2>ç•°ä½“å­—</h2>

<h2>ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „</span>ã€ã¨ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „‚</span>ã€</h2>

</section>
<section>

<h3>é•ã†å­—å½¢ã ã‘ã©åŒã˜æ–‡å­—</h3>

<p>ç•°ä½“å­—ã‚»ãƒ¬ã‚¯ã‚¿</p>

<ul>
  <li>ã€Œ<span style="font-family:IPAmjMincho">ä»¤</span>ã€ U+4EE4</li>
  <li>ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „</span>ã€ U+4EE4 <strong>U+E0101</strong>
</li>
  <li>ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „‚</span>ã€ U+4EE4 <strong>U+E0102</strong>
</li>
</ul>

<p>å›°ã‚‹ï¼</p>

</section>
<section>

<h3>MySQLã§</h3>

<pre style="font-size: 60%"><code class="language-sql">mysql&gt; set @a='ä»¤å’Œ', @b='ä»¤ó „å’Œ', @c='ä»¤ó „‚å’Œ';
mysql&gt; select hex(@a), hex(@b), hex(@c)\G
*************************** 1. row ***************************
hex(@a): E4BBA4E5928C
hex(@b): E4BBA4F3A08481E5928C
hex(@c): E4BBA4F3A08482E5928C
mysql&gt; select @a=@b, @b=@c;
+-------+-------+
| @a=@b | @b=@c |
+-------+-------+
|     1 |     1 | â† ä¸€è‡´
+-------+-------+
</code></pre>

<p style="font-size:60%; color:#888">â€»éƒ½åˆã«ã‚ˆã‚ŠåŒã˜å­—ä½“ã«è¦‹ãˆã¦ã¾ã™</p>

</section>
<section>

<h1>ğŸ˜Š</h1>

</section>
<section>

<h2>ãã®3</h2>
<h2>ã€Œä»¤å’Œã€ã¨è¨€ãˆã°â€¦</h2>

</section>
<section>

<h2>å…ƒå·</h2>

</section>
<section>

<h2>å…ƒå·ã¨è¨€ãˆã°â€¦</h2>

</section>
<section>

<h2>åˆå­—</h2>

<ul style="font-family:IPAexGothic">
  <li>æ˜æ²»: ã¾ U+337E</li>
  <li>å¤§æ­£: ã½ U+337D</li>
  <li>æ˜­å’Œ: ã¼ U+337C</li>
  <li>å¹³æˆ: ã» U+337B</li>
  <li>ä»¤å’Œ: ã‹¿ U+32FF</li>
</ul>

</section>
<section>

<h3>MySQLã§</h3>

<pre style="font-size: 60%"><code class="language-sql">mysql&gt; select 'æ˜æ²»'='ã¾', 'å¤§æ­£'='ã½', 'æ˜­å’Œ'='ã¼',
    -&gt; 'å¹³æˆ'='ã»', 'ä»¤å’Œ'='ã‹¿'\G
*************************** 1. row ***************************
'æ˜æ²»'='ã¾': 1   â† ä¸€è‡´
'å¤§æ­£'='ã½': 1   â† ä¸€è‡´
'æ˜­å’Œ'='ã¼': 1   â† ä¸€è‡´
'å¹³æˆ'='ã»': 1   â† ä¸€è‡´
'ä»¤å’Œ'='ã‹¿': 0   â† ä¸ä¸€è‡´
</code></pre>

</section>
<section>

<h1>ğŸ˜‡</h1>

</section>
<section>

<h2>æœ¬æ—¥ã®ãƒ†ãƒ¼ãƒ</h2>

</section>
<section>

<h2>ã€Œã“ã“ãŒãƒ˜ãƒ³ã ã‚ˆMySQLã€</h2>

</section>
<section>

<h2>ãªã«ãŒèµ·ãã¦ã‚‹ã®ã‹ï¼Ÿ</h2>

</section>
<section>

<h2>Unicodeã®ç…§åˆé †åº</h2>

<p>Unicode Collation Algorithm (UCA)<br>
<a href="https://unicode.org/reports/tr10/tr10-34.html" style="font-size:80%">https://unicode.org/reports/tr10/tr10-34.html</a></p>

<p>Default Unicode Collation Element Table (DUCET)<br>
<a href="https://www.unicode.org/Public/UCA/9.0.0/allkeys.txt" style="font-size:80%">https://www.unicode.org/Public/UCA/9.0.0/allkeys.txt</a></p>

<p>æ–‡å­—æ¯ã«Weightã¨ã„ã†å€¤ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹<br>
WeightãŒç­‰ã—ã„ãªã‚‰ç­‰ã—ã„æ–‡å­—</p>

</section>
<section>

<h2>ãã®1</h2>

<h2>ä¼¼ã¦ã‚‹ã‘ã©é•ã†æ–‡å­—</h2>

<h2>ã€Œä»¤ã€ã¨ã€Œï¦¨ã€</h2>

</section>
<section>

<ul>
  <li>ã€Œä»¤ã€ U+4EE4 CJK UNIFIED IDEOGRAPH<br>
DUCETã«ã¯ç„¡ã„ã‘ã©è¨ˆç®—ã§æ±‚ã¾ã‚‹
    <pre><code>[.FB40.0020.0002][.(CP | 0x8000).0000.0000]
â†’ [.FB40.0020.0002][.CEE4.0000.0000]
</code></pre>
  </li>
  <li>ã€Œï¦¨ã€ U+F9A8 CJK COMPATIBILITY IDEOGRAPH<br>
DUCETã«ã‚ã‚‹
    <pre><code>F9A8  ; [.FB40.0020.0002][.CEE4.0000.0000]
</code></pre>
  </li>
</ul>

<p>WeightãŒä¸€è‡´ã™ã‚‹ã‹ã‚‰ç­‰ã—ã„</p>

</section>
<section>

<h2>ãã®2</h2>

<h2>ç•°ä½“å­—</h2>

<h2>ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „</span>ã€ã¨ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „‚</span>ã€</h2>

</section>
<section>

<p>ç•°ä½“å­—ã‚»ãƒ¬ã‚¯ã‚¿</p>

<ul>
  <li>ã€Œ<span style="font-family:IPAmjMincho">ä»¤</span>ã€ U+4EE4</li>
  <li>ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „</span>ã€ U+4EE4 <strong>U+E0101</strong>
</li>
  <li>ã€Œ<span style="font-family:IPAmjMincho">ä»¤ó „‚</span>ã€ U+4EE4 <strong>U+E0102</strong>
</li>
</ul>

<p>ç•°ä½“å­—ã‚»ãƒ¬ã‚¯ã‚¿ã¯DUCETã«ã‚ã‚‹</p>

<pre><code>E0101 ; [.0000.0000.0000] # VARIATION SELECTOR-18
E0102 ; [.0000.0000.0000] # VARIATION SELECTOR-19
</code></pre>

<p>UCAã§ã¯ã™ã¹ã¦ã‚¼ãƒ­ã®æ–‡å­—ã¯ç„¡è¦–</p>

</section>
<section>

<h2>ãã®3</h2>

<h2>åˆå­—</h2>

<p style="font-family:IPAexGothic">ã¾ / ã½ / ã¼ / ã» / ã‹¿</p>

</section>
<section>

<h3>å¹³æˆ=ã»</h3>

<ul>
  <li>å¹³(U+5E73)æˆ(U+6210): ã»(U+337B)</li>
</ul>

<pre style="font-size: 60%"><code>å¹³æˆ [.FB40.0020.0002][.DE73.0000.0000][.FB40.0020.0002][.E210.0000.0000]
ã»   [.FB40.0020.001C][.DE73.0000.0000][.FB40.0020.001C][.E210.0000.0000]
</code></pre>

<p>ã¡ã‚‡ã£ã¨é•ã†â€¦ ğŸ¤”</p>

</section>
<section>

<h3>utf8mb4_0900_ai_ci</h3>

<p>MySQLã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®Collation</p>

<table>
  <thead>
    <tr>
      <th>è¦ç´ </th>
      <th>æ„å‘³</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>utf8mb4</td>
      <td>4ãƒã‚¤ãƒˆUTF-8</td>
    </tr>
    <tr>
      <td>0900</td>
      <td>Unicode 9.0.0</td>
    </tr>
    <tr>
      <td>ai</td>
      <td>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®é•ã„ã‚’ç„¡è¦–</td>
    </tr>
    <tr>
      <td>ci</td>
      <td>å¤§æ–‡å­—å°æ–‡å­—ã®é•ã„ã‚’ç„¡è¦–</td>
    </tr>
  </tbody>
</table>

<p><code>ci</code>ã®å ´åˆã¯Weightã®3ç•ªç›®ã‚’ç„¡è¦–</p>

</section>
<section>

<p><code>ci</code>ã®å ´åˆã¯Weightã®3ç•ªç›®ã‚’ç„¡è¦–</p>

<pre style="font-size: 60%"><code>å¹³æˆ [.FB40.0020.0002][.DE73.0000.0000][.FB40.0020.0002][.E210.0000.0000]
ã»   [.FB40.0020.001C][.DE73.0000.0000][.FB40.0020.001C][.E210.0000.0000]
</code></pre>

<p>3ç•ªç›®ã‚’ç„¡è¦–ã™ã‚‹ã¨</p>

<pre style="font-size: 60%"><code>å¹³æˆ [.FB40.0020.    ][.DE73.0000.    ][.FB40.0020.    ][.E210.0000.    ]
ã»   [.FB40.0020.    ][.DE73.0000.    ][.FB40.0020.    ][.E210.0000.    ]
</code></pre>

<p>ä¸€è‡´</p>

</section>
<section>

<h3 style="font-family:IPAexGothic">ä»¤å’Œâ‰ ã‹¿</h3>

<p style="font-family:IPAexGothic">ã€Œã‹¿ã€ãŒDUCETã«ç„¡ã„ï¼</p>

</section>
<section>

<p style="font-family:IPAexGothic">ã€Œã‹¿ã€ã¯Unicode 9.0.0 ã«ç„¡ã„ï¼</p>

</section>
<section>

<p style="font-family:IPAexGothic">ã€Œã‹¿ã€ã¯Unicode 12.1.0 ã§è¿½åŠ </p>

<p><a href="http://unicode.org/versions/Unicode12.1.0/" style="font-size:80%">http://unicode.org/versions/Unicode12.1.0/</a></p>

<p style="font-family:IPAexGothic">12.1 ã¯ã€Œã‹¿ã€ã®ãŸã‚ã ã‘ã« 5/7 ã«ãƒªãƒªãƒ¼ã‚¹</p>

<blockquote style="font-size: 50%; text-align: left">
  <p>Unicode 12.1 adds exactly one character, for a total of 137,929 characters.<br>
The new character added to Version 12.1 is:<br>
    U+32FF SQUARE ERA NAME REIWA<br>
Version 12.1 adds that single character to enable software to be<br>
rapidly updated to support the new Japanese era name in calendrical<br>
systems and date formatting. The new Japanese era name was officially<br>
announced on April 1, 2019, and is effective as of May 1, 2019.</p>
</blockquote>

</section>
<section>

<h2>MySQLç‹¬è‡ªã®å¤‰ãªæŒ™å‹•ã˜ã‚ƒãªãã¦Unicodeã®è¦å‰‡ã ã£ãŸï¼</h2>

</section>
<section>

<h2>Unicodeè¦å‰‡ã«ã¡ã‚ƒã‚“ã¨å¾“ã£ã¦ã‚‹MySQLãˆã‚‰ã„ï¼</h2>

</section>
<section>

<h2>æœ¬æ—¥ã®ãƒ†ãƒ¼ãƒ</h2>

</section>
<section>

<h2>ã€Œã“ã“ãŒã‚¹ã‚´ã‚¤ã‚ˆMySQLã€</h2>

</section>

  </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>


<script>
  (function() {
  function extend( a, b ) {
    for(var i in b) {
      a[i] = b[i];
    }
  }
  var baseOptions = {
    transition: 'default',

    dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true },
      { src: 'plugin/notes/notes.js', async: true }
    ]
  };

  
    baseOptions.dependencies.push({ src: 'plugin/rabbit/rabbit.js', async: true });
  

  var configOptions = {"controls":true,"postgress":true,"slideNumber":true,"history":true,"overview":true,"enter":true,"touch":false,"loop":false,"rtl":false,"fragments":true,"autoSlide":0,"autoSlideStoppable":false,"mouseWheel":false,"transition":"default","transitionSpeed":"fast","alloted_time":420}
  var initializeOptions = {};
  extend(initializeOptions, baseOptions);
  extend(initializeOptions, configOptions);
  Reveal.initialize(initializeOptions);
})();

</script>

  </body>
</html>
